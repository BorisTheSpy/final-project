<style>
  header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 1rem 2rem;
  }
  header h1 {
    margin: 0 0 1rem 0;
    font-size: 2rem;
  }
  .header-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
  }
  header nav {
    display: flex;
    gap: 1.5rem;
    flex-wrap: wrap;
  }
  header nav a {
    color: white;
    text-decoration: none;
    font-weight: 500;
    padding: 0.5rem 1rem;
    border-radius: 5px;
    transition: background 0.3s;
  }
  header nav a:hover {
    background: rgba(255, 255, 255, 0.2);
  }
  .auth-section {
    display: flex;
    gap: 1rem;
    align-items: center;
  }
  .user-menu {
    position: relative;
  }
  .user-button {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1rem;
  }
  .promo-banner {
    background: #ffc107;
    color: #000;
    text-align: center;
    padding: 0.5rem;
    font-weight: bold;
    margin-top: 1rem;
    border-radius: 5px;
  }
  .admin-link {
    margin-top: 0.5rem;
  }
  .admin-link a {
    background: rgba(0, 0, 0, 0.3);
    padding: 0.4rem 0.8rem;
    border-radius: 5px;
    font-size: 0.9rem;
  }
</style>

<div class="header-top">
  <h1>ü•™ Sandwich Shop</h1>
  <div class="auth-section" id="auth-section">
    <a href="login.html" id="auth-link">Sign In</a>
  </div>
</div>

<nav>
  <a href="index.html">Home</a>
  <a href="menu.html">Order Now</a>
  <a href="feedback.html">Reviews</a>
</nav>

<div class="promo-banner" id="promo-banner" style="display: none;">
  üéâ <span id="promo-text">Loading promo...</span>
</div>

<div class="admin-link" id="admin-link-section" style="display: none;">
  <a href="admin.html">üîê Admin Panel</a>
</div>

<hr style="margin-top: 1rem; border: none; border-top: 1px solid rgba(255,255,255,0.3);" />

<script>
  const API_URL = 'http://localhost:8000';
  
  // Load and display active promo code
  async function loadPromoCode() {
    try {
      const response = await fetch(`${API_URL}/promos/active`);
      const promos = await response.json();
      
      if (promos && promos.length > 0) {
        const promo = promos[0];
        document.getElementById('promo-banner').style.display = 'block';
        const discountText = promo.discount_type === 'Percentage' 
          ? `${promo.value}% off` 
          : `$${promo.value} off`;
        document.getElementById('promo-text').textContent = 
          `Use code "${promo.code}" for ${discountText}! ${promo.description || ''}`;
      }
    } catch (error) {
      console.error('Error loading promo code:', error);
    }
  }
  
  // Update auth section based on login status
  function updateAuthSection() {
    // Import getCurrentUser from auth.js
    if (typeof getCurrentUser === 'function') {
      const user = getCurrentUser();
      const authSection = document.getElementById('auth-section');
      
      if (user) {
        authSection.innerHTML = `
          <div class="user-menu">
            <a href="account.html" style="background: rgba(255, 255, 255, 0.3);">
              üë§ ${user.name}
            </a>
          </div>
        `;
        
        // Show admin link if user is admin
        if (user.role === 'Admin') {
          document.getElementById('admin-link-section').style.display = 'block';
        }
      }
    }
  }
  
  // Load promo and update auth on page load
  loadPromoCode();
  
  // Wait for auth.js to load before updating auth section
  setTimeout(updateAuthSection, 100);
</script>
